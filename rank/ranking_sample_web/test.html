<!DOCTYPE html>
<html>
<head>
    <title>Global Ranking</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>ğŸ† ì‹¤ì‹œê°„ ë­í‚¹ TOP 10</h1>
    <div id="ranking-board">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

    <script>
        async function loadRanking() {
            const API_URL = "https://zuabi9522f.execute-api.ap-northeast-2.amazonaws.com/KG_web_rank_api/ranking";

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ "action": "get_ranking" })
                });

                if (!response.ok) throw new Error('ë„¤íŠ¸ì›Œí¬ ì‘ë‹µ ì—ëŸ¬');

                const data = await response.json();
                console.log("ë°›ì€ ë°ì´í„°:", data);

                const board = document.getElementById('ranking-board');
                
                // ëŒë‹¤ì—ì„œ ì¤€ rankings ë°°ì—´ì„ í™”ë©´ì— ë¿Œë ¤ì¤Œ
                if (data.rankings && data.rankings.length > 0) {
                    board.innerHTML = "<ul>" + data.rankings.map(r => 
                        `<li><strong>${r.rank}ìœ„</strong>: ${r.user_id} (${r.score}ì )</li>`
                    ).join('') + "</ul>";
                } else {
                    board.innerHTML = "ë“±ë¡ëœ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.";
                }

            } catch (error) {
                console.error("ì—ëŸ¬:", error);
                document.getElementById('ranking-board').innerText = "ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
            }
        }

        window.onload = loadRanking;
    </script>
</body>
</html>